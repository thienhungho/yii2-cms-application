/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2015 - 2018
 * @package yii2-tree-manager
 * @version 1.1.1
 *
 * Tree View Input Widget Management Script
 *
 * Author: Kartik Visweswaran
 * Copyright: 2015 - 2018, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
!function(t){"use strict";var e,n;e=function(e,n){return null==e||0===e.length||n&&""===t.trim(e)},(n=function(e,n){this.$element=t(e),this.init(n),this.listen()}).prototype={constructor:n,init:function(n){var i,l,o,r=this,s=[];if(t.each(n,function(t,e){r[t]=e}),r.$tree=t("#"+r.treeId),r.$input=t("#"+r.inputId),r.$dropdown=t("#"+r.dropdownId),e(r.placeholder)&&(r.placeholder="&nbsp;"),e(r.value))r.$input.html(r.caret+r.placeholder);else{for(o=r.value.toString().split(","),i=0;i<o.length;i++)l=r.$tree.find('li[data-key="'+o[i]+'"]').find(">.kv-tree-list .kv-node-label").text(),s.push(l);r.setInput(s)}},setInput:function(t){var n="";this.$input.removeClass("has-multi"),e(t)||e(t[0])?n=this.placeholder:1===t.length?n=t[0]:(n='<ul class="kv-tree-input-values"><li>'+t.join("</li><li>")+'</li></ul><div class="clearfix"></div>',this.$input.addClass("has-multi")),this.$input.html(this.caret+n)},listen:function(){var t=this;t.$dropdown.on("click",function(t){t.stopPropagation()}),t.$element.on("treeview.change",function(e,n,i){t.setInput(i.split(",")),t.autoCloseOnSelect&&t.$input.closest(".kv-tree-dropdown-container").removeClass("open")})}},t.fn.treeinput=function(e){var i,l,o,r=Array.apply(null,arguments);return r.shift(),this.each(function(){i=t(this),l=i.data("treeinput"),o="object"==typeof e&&e,l||(l=new n(this,t.extend({},t.fn.treeinput.defaults,o,t(this).data())),i.data("treeinput",l)),"string"==typeof e&&l[e].apply(l,r)})},t.fn.treeinput.defaults={treeId:"",inputId:"",dropdownId:"",placeholder:"",value:"",caret:"",autoCloseOnSelect:!0},t.fn.treeinput.Constructor=n}(window.jQuery);